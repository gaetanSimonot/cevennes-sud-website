<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acteurs Locaux - Cévennes Sud</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSJRp7NCeKSPiKnezVyJiJFg5dqhbWnyw&libraries=marker&callback=Function.prototype" defer></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background-color: #fafafa;
        }

        .font-display {
            font-family: 'Playfair Display', serif;
        }

        /* Hero Section */
        .hero-background {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(37, 99, 235, 0.95) 50%, rgba(29, 78, 216, 0.98) 100%),
                        url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80') center/cover;
            background-attachment: fixed;
            position: relative;
            overflow: hidden;
        }

        /* Floating Elements Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(2deg); }
            66% { transform: translateY(10px) rotate(-1deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Premium Card Styles */
        .premium-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .premium-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #2563eb, #1d4ed8);
        }

        .premium-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.12), 0 12px 24px rgba(0, 0, 0, 0.08);
            border-color: rgba(59, 130, 246, 0.3);
        }

        /* Navigation Improvements */
        .nav-backdrop {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        /* Map Styling */
        .map-container {
            height: 500px;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        /* Filter Buttons */
        .filter-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-color: rgba(59, 130, 246, 0.3);
        }

        /* Search Box */
        .search-box {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        /* Actor Cards */
        .actor-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.06);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .actor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #2563eb);
        }

        .actor-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(59, 130, 246, 0.15), 0 10px 25px rgba(0, 0, 0, 0.08);
        }

        /* Scroll Animations */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-radius: 4px;
        }

        /* Category Icons */
        .category-commerce { color: #f59e0b; }
        .category-restaurant { color: #ef4444; }
        .category-artisan { color: #8b5cf6; }
        .category-therapeute { color: #10b981; }
        .category-service { color: #06b6d4; }
        .category-association { color: #f59e0b; }

        /* View Toggle */
        .view-toggle {
            color: #64748b;
            background: transparent;
        }

        .view-toggle.active {
            background: #3b82f6;
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .view-toggle:hover:not(.active) {
            background: #f1f5f9;
            color: #334155;
        }

        /* List View Styles */
        .actors-list-view {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .actors-list-view .actor-card {
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 1.5rem;
            max-width: none;
        }

        .actors-list-view .actor-card .actor-image {
            width: 80px;
            height: 80px;
            min-width: 80px;
            margin-right: 1.5rem;
        }

        .actors-list-view .actor-card .actor-content {
            flex: 1;
        }

        /* Hero Text Animations */
        .hero-title {
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .hero-subtitle {
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        /* Mobile Optimizations */
        @media (max-width: 640px) {
            .hero-background {
                background-attachment: scroll;
                min-height: 90vh;
            }

            .hero-title {
                font-size: 2.5rem;
                line-height: 1.2;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .premium-card:hover,
            .actor-card:hover {
                transform: none;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="nav-backdrop fixed w-full top-0 z-50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <!-- Logo -->
                <div class="flex items-center space-x-3 mr-8">
                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-mountain text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="font-display font-bold text-2xl bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">Cévennes Sud</h1>
                        <p class="text-sm text-gray-500 font-medium">Votre communauté locale</p>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Accueil
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="acteurs-locaux.html" class="text-blue-600 font-semibold text-lg relative group">
                        Acteurs Locaux
                        <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-blue-600"></span>
                    </a>
                    <a href="evenements.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Événements
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="echangeons.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Petites Annonces
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="parlons-en.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Parlons-en
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="troc-tout.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Troc Tout
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="panneau-village.html" class="text-gray-700 hover:text-blue-600 transition-colors text-lg relative group">
                        Panneau du Village
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors">
                    <i class="fas fa-bars text-xl text-gray-700"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="md:hidden hidden bg-white/95 backdrop-blur-xl rounded-2xl mt-4 p-6 shadow-xl border border-white/20">
                <div class="space-y-4">
                    <a href="index.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Accueil</a>
                    <a href="acteurs-locaux.html" class="block text-blue-600 font-semibold text-lg">Acteurs Locaux</a>
                    <a href="evenements.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Événements</a>
                    <a href="echangeons.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Petites Annonces</a>
                    <a href="parlons-en.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Parlons-en</a>
                    <a href="troc-tout.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Troc Tout</a>
                    <a href="panneau-village.html" class="block text-gray-700 hover:text-blue-600 transition-colors text-lg">Panneau du Village</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-background pt-20 pb-12 text-white relative overflow-hidden">
        <!-- Floating Elements -->
        <div class="absolute top-20 left-10 floating opacity-20">
            <div class="w-20 h-20 bg-white/10 rounded-full blur-sm"></div>
        </div>
        <div class="absolute bottom-10 right-16 floating opacity-30" style="animation-delay: 2s;">
            <div class="w-12 h-12 bg-blue-400/20 rounded-full blur-sm"></div>
        </div>
        <div class="absolute top-1/2 right-1/4 floating opacity-25" style="animation-delay: 4s;">
            <div class="w-16 h-16 bg-indigo-300/15 rounded-full blur-sm"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <!-- Icon -->
            <div class="hero-title mb-6">
                <div class="w-20 h-20 mx-auto mb-4 bg-white/20 backdrop-blur-lg rounded-3xl flex items-center justify-center shadow-2xl floating">
                    <i class="fas fa-store text-white text-3xl"></i>
                </div>
            </div>

            <!-- Title -->
            <h1 class="hero-title font-display font-bold text-4xl sm:text-5xl lg:text-6xl mb-6">
                Acteurs Locaux
            </h1>

            <!-- Subtitle -->
            <p class="hero-subtitle text-xl sm:text-2xl text-white/90 max-w-4xl mx-auto leading-relaxed">
                Découvrez les professionnels, commerces, artisans, thérapeutes et restaurants de Ganges et ses environs
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-16 bg-gradient-to-br from-gray-50 to-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Add Business Button -->
            <div class="mb-12 text-center reveal">
                <a href="admin-add-actor.html" class="inline-block bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-10 py-4 rounded-2xl text-lg font-semibold shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300">
                    <i class="fas fa-plus mr-3"></i>Publier un commerce/service
                </a>
            </div>

            <!-- Search and Filters -->
            <div class="mb-12 reveal">
                <div class="flex flex-col lg:flex-row gap-6">
                    <!-- Search Bar -->
                    <div class="flex-1">
                        <div class="search-box rounded-2xl p-4">
                            <div class="relative">
                                <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-blue-500 text-lg"></i>
                                <input
                                    type="text"
                                    id="searchInput"
                                    placeholder="Rechercher un professionnel, commerce, service..."
                                    class="w-full pl-12 pr-4 py-3 bg-transparent border-0 focus:ring-0 focus:outline-none text-lg placeholder-gray-500"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- Category Filters -->
                    <div class="flex flex-wrap gap-3 justify-center">
                        <button class="filter-btn active px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="all">
                            <i class="fas fa-th-large mr-2"></i>Tous
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="commerce">
                            <i class="fas fa-shopping-basket mr-2 category-commerce"></i>Commerces
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="restaurant">
                            <i class="fas fa-utensils mr-2 category-restaurant"></i>Restaurants
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="artisan">
                            <i class="fas fa-hammer mr-2 category-artisan"></i>Artisans
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="therapeute">
                            <i class="fas fa-heart mr-2 category-therapeute"></i>Thérapeutes
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="service">
                            <i class="fas fa-briefcase mr-2 category-service"></i>Services
                        </button>
                        <button class="filter-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all" data-category="association">
                            <i class="fas fa-users mr-2 category-association"></i>Associations
                        </button>
                    </div>

                    <!-- View Toggle -->
                    <div class="flex justify-center mt-6">
                        <div class="bg-white rounded-xl p-1 shadow-lg border border-gray-200">
                            <button id="cardView" class="view-toggle active px-4 py-2 rounded-lg font-medium text-sm transition-all">
                                <i class="fas fa-th-large mr-2"></i>Cartes
                            </button>
                            <button id="listView" class="view-toggle px-4 py-2 rounded-lg font-medium text-sm transition-all">
                                <i class="fas fa-list mr-2"></i>Liste
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Section -->
            <div class="mb-16 reveal">
                <div class="premium-card rounded-3xl p-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="font-display font-bold text-3xl text-gray-900">
                            <i class="fas fa-map-marked-alt mr-3 text-blue-600"></i>
                            Carte Interactive
                        </h2>
                        <div class="flex space-x-3">
                            <button onclick="centerMap()" class="bg-blue-100 text-blue-600 px-4 py-2 rounded-xl font-medium hover:bg-blue-200 transition-colors">
                                <i class="fas fa-crosshairs mr-2"></i>Centrer
                            </button>
                        </div>
                    </div>
                    <div id="map" class="map-container"></div>
                </div>
            </div>

            <!-- Actors List -->
            <div class="reveal">
                <h2 class="font-display font-bold text-3xl text-gray-900 mb-8 text-center">
                    Annuaire des Professionnels
                </h2>

                <div id="actorsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Actor cards will be dynamically generated -->
                </div>

                <!-- No Results Message -->
                <div id="noResults" class="hidden text-center py-16">
                    <div class="w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-search text-gray-400 text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-600 mb-2">Aucun résultat trouvé</h3>
                    <p class="text-gray-500">Essayez de modifier vos critères de recherche</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-16 relative overflow-hidden">
        <div class="absolute inset-0 opacity-5">
            <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-900 to-indigo-900"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-12">
                <div class="lg:col-span-2">
                    <div class="flex items-center space-x-4 mb-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-xl">
                            <i class="fas fa-mountain text-white text-2xl"></i>
                        </div>
                        <div>
                            <h1 class="font-display font-bold text-3xl">Cévennes Sud</h1>
                            <p class="text-gray-400 text-lg">Votre communauté locale connectée</p>
                        </div>
                    </div>

                    <p class="text-gray-300 text-lg mb-8 leading-relaxed max-w-2xl">
                        Découvrez et soutenez les acteurs économiques locaux de notre belle région des Cévennes.
                        Ensemble, faisons vivre notre territoire !
                    </p>

                    <div class="flex items-center text-gray-400 text-lg">
                        <i class="fas fa-map-marker-alt mr-3 text-blue-400"></i>
                        <span>Ganges • Saint-Hippolyte-du-Fort • Sud Cévennes</span>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold mb-8 text-2xl text-white">Navigation</h3>
                    <ul class="space-y-4 text-gray-300 text-lg">
                        <li><a href="index.html" class="hover:text-blue-400 transition-colors flex items-center group">
                            <i class="fas fa-home mr-3 text-blue-400 group-hover:scale-110 transition-transform"></i>
                            Accueil
                        </a></li>
                        <li><a href="evenements.html" class="hover:text-purple-400 transition-colors flex items-center group">
                            <i class="fas fa-calendar-star mr-3 text-purple-400 group-hover:scale-110 transition-transform"></i>
                            Événements
                        </a></li>
                        <li><a href="echangeons.html" class="hover:text-orange-400 transition-colors flex items-center group">
                            <i class="fas fa-handshake mr-3 text-orange-400 group-hover:scale-110 transition-transform"></i>
                            Échangeons
                        </a></li>
                        <li><a href="parlons-en.html" class="hover:text-emerald-400 transition-colors flex items-center group">
                            <i class="fas fa-comments mr-3 text-emerald-400 group-hover:scale-110 transition-transform"></i>
                            Parlons-en
                        </a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold mb-8 text-2xl text-white">Contact</h3>
                    <ul class="space-y-4 text-gray-300 text-lg">
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-4 text-blue-400"></i>
                            <a href="mailto:contact@cevennesud.fr" class="hover:text-blue-400 transition-colors">
                                contact@cevennesud.fr
                            </a>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-4 text-blue-400"></i>
                            <a href="tel:0467733000" class="hover:text-blue-400 transition-colors">
                                04 67 73 XX XX
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-16 pt-8 text-center">
                <p class="text-gray-400 text-lg">
                    &copy; 2024 Cévennes Sud. Fait avec ❤️ pour notre belle communauté locale.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Données des acteurs locaux (chargées depuis JSON ou données par défaut)
        let actorsData = [
            {
                id: 1,
                name: "Boulangerie des Cévennes",
                category: "commerce",
                description: "Pain artisanal au levain, viennoiseries et pâtisseries maison",
                address: "15 rue de la République, Ganges",
                phone: "04 67 73 85 12",
                email: "contact@boulangerie-cevennes.fr",
                website: "",
                horaires: "Mar-Sam: 6h30-19h, Dim: 6h30-13h",
                specialites: ["Pain bio", "Viennoiseries", "Pâtisseries"],
                lat: 43.9339,
                lng: 3.7086,
                image: "https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 2,
                name: "Restaurant La Table Cévenole",
                category: "restaurant",
                description: "Cuisine traditionnelle avec produits locaux et de saison",
                address: "8 place du Marché, Ganges",
                phone: "04 67 73 91 45",
                email: "reservation@table-cevenole.fr",
                website: "www.table-cevenole.fr",
                horaires: "Mar-Dim: 12h-14h, 19h-22h",
                specialites: ["Cuisine du terroir", "Produits locaux", "Menu saisonnier"],
                lat: 43.9345,
                lng: 3.7092,
                image: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 3,
                name: "Atelier Céramique Cévenol",
                category: "artisan",
                description: "Poterie artisanale et cours de céramique pour tous niveaux",
                address: "22 avenue des Cévennes, Ganges",
                phone: "04 67 73 76 28",
                email: "marie@ceramique-cevenol.fr",
                website: "www.ceramique-cevenol.fr",
                horaires: "Lun-Ven: 9h-18h, Sam: 9h-12h",
                specialites: ["Poterie", "Cours céramique", "Créations uniques"],
                lat: 43.9351,
                lng: 3.7075,
                image: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 4,
                name: "Cabinet de Naturopathie",
                category: "therapeute",
                description: "Consultations en naturopathie, phytothérapie et aromathérapie",
                address: "12 rue Victor Hugo, Ganges",
                phone: "04 67 73 82 96",
                email: "sophie@naturo-cevennes.fr",
                website: "www.naturo-cevennes.fr",
                horaires: "Lun-Ven: 9h-19h, Sam: 9h-12h",
                specialites: ["Naturopathie", "Phytothérapie", "Bilan de santé"],
                lat: 43.9337,
                lng: 3.7089,
                image: "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 5,
                name: "Garage Moderne",
                category: "service",
                description: "Réparation automobile toutes marques, entretien et dépannage",
                address: "Zone artisanale, Route de Montpellier",
                phone: "04 67 73 88 14",
                email: "contact@garage-moderne.fr",
                website: "",
                horaires: "Lun-Ven: 8h-18h, Sam: 8h-12h",
                specialites: ["Mécanique générale", "Carrosserie", "Dépannage 24h"],
                lat: 43.9325,
                lng: 3.7102,
                image: "https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 6,
                name: "Épicerie Bio Les Paniers",
                category: "commerce",
                description: "Produits biologiques locaux, épicerie fine et circuits courts",
                address: "5 place de l'Église, Ganges",
                phone: "04 67 73 79 33",
                email: "info@les-paniers-bio.fr",
                website: "www.les-paniers-bio.fr",
                horaires: "Mar-Sam: 8h30-19h, Dim: 8h30-12h30",
                specialites: ["Produits bio", "Circuits courts", "Épicerie fine"],
                lat: 43.9342,
                lng: 3.7081,
                image: "https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 7,
                name: "Association Culturelle Gangeoise",
                category: "association",
                description: "Organisation d'événements culturels, spectacles et animations pour dynamiser la vie locale",
                address: "Mairie de Ganges, 34190 Ganges",
                phone: "04 67 73 92 15",
                email: "culture@ganges-animation.fr",
                website: "www.culture-ganges.fr",
                horaires: "Sur rendez-vous",
                specialites: ["Spectacles", "Festivals", "Animations"],
                lat: 43.9339,
                lng: 3.7086,
                image: "https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 8,
                name: "Club de Randonnée Gangeois",
                category: "association",
                description: "Découverte des sentiers cévenols et sorties nature pour tous niveaux",
                address: "Place de la Mairie, 34190 Ganges",
                phone: "04 67 73 88 45",
                email: "rando@club-ganges.fr",
                website: "",
                horaires: "Réunion 1er mercredi du mois 19h",
                specialites: ["Randonnée", "Nature", "Patrimoine"],
                lat: 43.9339,
                lng: 3.7086,
                image: "https://images.unsplash.com/photo-1551698618-1dfe5d97d256?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 9,
                name: "Comité des Fêtes de Ganges",
                category: "association",
                description: "Organisation des fêtes traditionnelles et événements festifs du village",
                address: "Mairie de Ganges, 34190 Ganges",
                phone: "04 67 73 85 00",
                email: "fetes@ganges-animation.fr",
                website: "",
                horaires: "Variable selon événements",
                specialites: ["Fêtes traditionnelles", "Marchés", "Animations"],
                lat: 43.9335,
                lng: 3.7095,
                image: "https://images.unsplash.com/photo-1530103862676-de8c9debad1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            }
        ];

        // Variables
        let map;
        let markers = [];
        let filteredActors = [...actorsData];

        // Charger les données depuis le fichier JSON
        async function loadActorsData() {
            try {
                const response = await fetch('data/actors-data.json');
                const data = await response.json();

                // Fusionner toutes les catégories en un seul tableau
                const allActors = [
                    ...data.commerce,
                    ...data.restaurant,
                    ...data.artisan,
                    ...data.therapeute,
                    ...data.service,
                    ...data.association
                ];

                // Si on a des données dans le JSON, les utiliser
                if (allActors.length > 0) {
                    actorsData = allActors;
                    filteredActors = [...actorsData];
                    console.log(`✅ ${actorsData.length} acteurs chargés depuis actors-data.json`);
                } else {
                    console.log('ℹ️  Utilisation des données par défaut (JSON vide)');
                }
            } catch (error) {
                console.log('ℹ️  Impossible de charger actors-data.json, utilisation des données par défaut');
                console.log(error);
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            await loadActorsData(); // Charger les données d'abord
            initMap();
            renderActors();
            setupEventListeners();
            initScrollAnimations();
        });

        // Initialize map
        function initMap() {
            if (typeof google === 'undefined' || !google.maps) {
                console.log('Google Maps en attente de chargement...');
                setTimeout(initMap, 100);
                return;
            }

            const mapElement = document.getElementById('map');

            // Style Nature - Épuré avec couleurs naturelles
            const mapStyle = [
                {"featureType":"water","elementType":"geometry","stylers":[{"color":"#a8dce3"},{"lightness":17}]},
                {"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":20}]},
                {"featureType":"landscape.natural","elementType":"geometry","stylers":[{"color":"#e8f5e9"}]},
                {"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffffff"},{"lightness":17}]},
                {"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#ffffff"},{"lightness":29},{"weight":0.2}]},
                {"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":18}]},
                {"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":16}]},
                {"featureType":"poi","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":21}]},
                {"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c8e6c9"},{"lightness":0}]},
                {"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#2e7d32"}]},
                {"elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#ffffff"},{"lightness":16}]},
                {"elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#333333"},{"lightness":40}]},
                {"elementType":"labels.icon","stylers":[{"visibility":"off"}]},
                {"featureType":"transit","elementType":"geometry","stylers":[{"color":"#f2f2f2"},{"lightness":19}]},
                {"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#fefefe"},{"lightness":20}]},
                {"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#fefefe"},{"lightness":17},{"weight":1.2}]}
            ];

            map = new google.maps.Map(mapElement, {
                center: { lat: 43.9339, lng: 3.7086 },
                zoom: 14,
                mapTypeControl: true,
                streetViewControl: true,
                fullscreenControl: true,
                styles: mapStyle
            });

            // Add markers
            updateMapMarkers();
        }

        // Update map markers
        function updateMapMarkers() {
            if (!map) return;

            // Clear existing markers
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            const infoWindow = new google.maps.InfoWindow();

            // Add new markers
            filteredActors.forEach(actor => {
                const premiumLevel = actor.premium_level || 'standard';

                // Définir la taille du marker selon le niveau premium
                let iconScale = 1;
                let iconColor = '#3b82f6'; // Bleu par défaut

                if (premiumLevel === 'standard') {
                    iconScale = 0.6; // Petit marker
                    iconColor = '#9ca3af'; // Gris
                } else if (premiumLevel === 'premium') {
                    iconScale = 1; // Taille normale
                    iconColor = '#3b82f6'; // Bleu
                } else if (premiumLevel === 'mega-premium') {
                    iconScale = 1.5; // Grand marker
                    iconColor = '#eab308'; // Jaune/Or
                }

                // Créer un marker personnalisé avec SVG
                const markerIcon = {
                    path: 'M12 0C7.58 0 4 3.58 4 8c0 5.25 8 13 8 13s8-7.75 8-13c0-4.42-3.58-8-8-8z',
                    fillColor: iconColor,
                    fillOpacity: 1,
                    strokeColor: '#ffffff',
                    strokeWeight: 2,
                    scale: iconScale,
                    anchor: new google.maps.Point(12, 21)
                };

                const marker = new google.maps.Marker({
                    position: { lat: actor.lat, lng: actor.lng },
                    map: map,
                    title: actor.name,
                    icon: markerIcon,
                    zIndex: premiumLevel === 'mega-premium' ? 1000 : (premiumLevel === 'premium' ? 500 : 100)
                });

                // InfoWindow adapté au niveau premium
                let contentString = '';

                if (premiumLevel === 'standard') {
                    contentString = `
                        <div class="p-3 min-w-48">
                            <div class="mb-2">
                                <h4 class="font-bold text-base text-gray-900">${actor.name}</h4>
                                <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">${getCategoryLabel(actor.category)}</span>
                            </div>
                        </div>
                    `;
                } else if (premiumLevel === 'premium') {
                    contentString = `
                        <div class="p-4 min-w-64">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas ${getCategoryIcon(actor.category)} text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-900">${actor.name}</h4>
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${getCategoryLabel(actor.category)}</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">${actor.description}</p>
                            <div class="space-y-2 text-sm text-gray-500">
                                <div class="flex items-center">
                                    <i class="fas fa-map-marker-alt w-4 text-blue-500 mr-2"></i>
                                    <span>${actor.address}</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-phone w-4 text-blue-500 mr-2"></i>
                                    <a href="tel:${actor.phone}" class="text-blue-600 hover:underline">${actor.phone}</a>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (premiumLevel === 'mega-premium') {
                    contentString = `
                        <div class="p-6 min-w-80">
                            <div class="mb-3">
                                <span class="bg-gradient-to-r from-yellow-400 to-amber-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                                    <i class="fas fa-star mr-1"></i>PARTENAIRE PREMIUM
                                </span>
                            </div>
                            <div class="flex items-start mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas ${getCategoryIcon(actor.category)} text-white text-lg"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-xl text-gray-900 mb-1">${actor.name}</h4>
                                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">${getCategoryLabel(actor.category)}</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-4">${actor.description}</p>
                            <div class="space-y-2 text-sm text-gray-500 mb-4">
                                <div class="flex items-center">
                                    <i class="fas fa-map-marker-alt w-4 text-yellow-500 mr-2"></i>
                                    <span>${actor.address}</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-phone w-4 text-yellow-500 mr-2"></i>
                                    <a href="tel:${actor.phone}" class="text-yellow-600 hover:underline font-semibold">${actor.phone}</a>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <a href="tel:${actor.phone}" class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-semibold">
                                    Appeler
                                </a>
                                ${actor.website ? `
                                    <a href="${actor.website}" target="_blank" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg text-center text-sm font-semibold">
                                        Site Web
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    `;
                }

                marker.addListener('click', () => {
                    infoWindow.setContent(contentString);
                    infoWindow.open(map, marker);
                });

                markers.push(marker);
            });
        }

        // Render actors list
        function renderActors() {
            const container = document.getElementById('actorsList');
            const noResults = document.getElementById('noResults');

            if (filteredActors.length === 0) {
                container.innerHTML = '';
                noResults.classList.remove('hidden');
                return;
            }

            noResults.classList.add('hidden');

            container.innerHTML = filteredActors.map(actor => {
                const premiumLevel = actor.premium_level || 'standard';

                // Rendu STANDARD : nom uniquement, pas de carte complète
                if (premiumLevel === 'standard') {
                    return `
                        <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow border border-gray-200">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-gradient-to-br ${getCategoryGradient(actor.category)} rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                                    <i class="fas ${getCategoryIcon(actor.category)} text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-gray-900">${actor.name}</h3>
                                    <p class="text-xs text-gray-500">${getCategoryLabel(actor.category)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Rendu PREMIUM : carte complète avec photo
                if (premiumLevel === 'premium') {
                    return `
                        <div class="actor-card rounded-3xl overflow-hidden group">
                            <div class="relative h-48 overflow-hidden">
                                <img src="${actor.image}"
                                     alt="${actor.name}"
                                     class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                                <div class="absolute top-4 right-4">
                                    <span class="bg-white/90 backdrop-blur-sm text-gray-800 px-3 py-1 rounded-full text-sm font-medium">
                                        ${getCategoryLabel(actor.category)}
                                    </span>
                                </div>
                            </div>

                            <div class="p-6">
                                <div class="flex items-start mb-4">
                                    <div class="w-12 h-12 bg-gradient-to-br ${getCategoryGradient(actor.category)} rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                                        <i class="fas ${getCategoryIcon(actor.category)} text-white text-lg"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-display font-bold text-xl text-gray-900 mb-2">${actor.name}</h3>
                                        <p class="text-gray-600 leading-relaxed">${actor.description}</p>
                                    </div>
                                </div>

                                <div class="space-y-3 mb-6 text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <i class="fas fa-map-marker-alt w-4 mr-3 text-gray-400"></i>
                                        <span>${actor.address}</span>
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-clock w-4 mr-3 text-gray-400"></i>
                                        <span>${actor.horaires}</span>
                                    </div>
                                </div>

                                <div class="flex flex-wrap gap-2 mb-6">
                                    ${actor.specialites.map(spec => `
                                        <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-xs font-medium">${spec}</span>
                                    `).join('')}
                                </div>

                                <div class="flex space-x-3">
                                    <a href="tel:${actor.phone}"
                                       class="flex-1 bg-blue-100 text-blue-600 px-4 py-2 rounded-xl font-medium text-center hover:bg-blue-200 transition-colors">
                                        <i class="fas fa-phone mr-2"></i>Appeler
                                    </a>
                                    ${actor.email ? `
                                        <a href="mailto:${actor.email}"
                                           class="flex-1 bg-gray-100 text-gray-600 px-4 py-2 rounded-xl font-medium text-center hover:bg-gray-200 transition-colors">
                                            <i class="fas fa-envelope mr-2"></i>Email
                                        </a>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Rendu MEGA PREMIUM : carte extra large avec badge
                if (premiumLevel === 'mega-premium') {
                    return `
                        <div class="md:col-span-2 lg:col-span-3 actor-card rounded-3xl overflow-hidden group border-4 border-yellow-400 relative">
                            <div class="absolute top-4 left-4 z-10">
                                <span class="bg-gradient-to-r from-yellow-400 to-amber-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
                                    <i class="fas fa-star mr-2"></i>PARTENAIRE PREMIUM
                                </span>
                            </div>
                            <div class="relative h-64 overflow-hidden">
                                <img src="${actor.image}"
                                     alt="${actor.name}"
                                     class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            </div>

                            <div class="p-8">
                                <div class="flex items-start mb-6">
                                    <div class="w-16 h-16 bg-gradient-to-br ${getCategoryGradient(actor.category)} rounded-2xl flex items-center justify-center mr-6 flex-shrink-0">
                                        <i class="fas ${getCategoryIcon(actor.category)} text-white text-2xl"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-display font-bold text-3xl text-gray-900 mb-3">${actor.name}</h3>
                                        <p class="text-lg text-gray-600 leading-relaxed">${actor.description}</p>
                                    </div>
                                </div>

                                <div class="grid md:grid-cols-2 gap-6 mb-6">
                                    <div class="space-y-4 text-sm text-gray-500">
                                        <div class="flex items-center">
                                            <i class="fas fa-map-marker-alt w-5 mr-4 text-gray-400 text-lg"></i>
                                            <span>${actor.address}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i class="fas fa-clock w-5 mr-4 text-gray-400 text-lg"></i>
                                            <span>${actor.horaires}</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-wrap gap-2 content-start">
                                        ${actor.specialites.map(spec => `
                                            <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-xs font-medium">${spec}</span>
                                        `).join('')}
                                    </div>
                                </div>

                                <div class="flex space-x-4">
                                    <a href="tel:${actor.phone}"
                                       class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 rounded-xl font-semibold text-center hover:shadow-xl transition-all text-lg">
                                        <i class="fas fa-phone mr-2"></i>Appeler Maintenant
                                    </a>
                                    ${actor.email ? `
                                        <a href="mailto:${actor.email}"
                                           class="flex-1 bg-gradient-to-r from-gray-600 to-gray-700 text-white px-6 py-4 rounded-xl font-semibold text-center hover:shadow-xl transition-all text-lg">
                                            <i class="fas fa-envelope mr-2"></i>Email
                                        </a>
                                    ` : ''}
                                    ${actor.website ? `
                                        <a href="${actor.website}" target="_blank"
                                           class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4 rounded-xl font-semibold text-center hover:shadow-xl transition-all text-lg">
                                            <i class="fas fa-globe mr-2"></i>Site Web
                                        </a>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Mobile menu
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Search
            document.getElementById('searchInput').addEventListener('input', function(e) {
                filterActors();
            });

            // Category filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterActors();
                });
            });

            // Add business button (maintenant un lien, plus besoin d'event listener)

            // View toggle
            document.getElementById('cardView').addEventListener('click', function() {
                document.querySelectorAll('.view-toggle').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                document.getElementById('actorsList').className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';
            });

            document.getElementById('listView').addEventListener('click', function() {
                document.querySelectorAll('.view-toggle').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                document.getElementById('actorsList').className = 'actors-list-view';
            });
        }

        // Filter actors
        function filterActors() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const activeCategory = document.querySelector('.filter-btn.active').dataset.category;

            filteredActors = actorsData.filter(actor => {
                const matchesSearch = !searchTerm ||
                    actor.name.toLowerCase().includes(searchTerm) ||
                    actor.description.toLowerCase().includes(searchTerm) ||
                    actor.address.toLowerCase().includes(searchTerm);

                const matchesCategory = activeCategory === 'all' || actor.category === activeCategory;

                return matchesSearch && matchesCategory;
            });

            renderActors();
            updateMapMarkers();
        }

        // Utility functions
        function getCategoryIcon(category) {
            const icons = {
                commerce: 'fa-shopping-basket',
                restaurant: 'fa-utensils',
                artisan: 'fa-hammer',
                therapeute: 'fa-heart',
                service: 'fa-briefcase',
                association: 'fa-users'
            };
            return icons[category] || 'fa-building';
        }

        function getCategoryLabel(category) {
            const labels = {
                commerce: 'Commerce',
                restaurant: 'Restaurant',
                artisan: 'Artisan',
                therapeute: 'Thérapeute',
                service: 'Service',
                association: 'Association'
            };
            return labels[category] || 'Autre';
        }

        function getCategoryGradient(category) {
            const gradients = {
                commerce: 'from-amber-400 to-amber-600',
                restaurant: 'from-red-400 to-red-600',
                artisan: 'from-purple-400 to-purple-600',
                therapeute: 'from-emerald-400 to-emerald-600',
                service: 'from-cyan-400 to-cyan-600',
                association: 'from-amber-400 to-amber-600'
            };
            return gradients[category] || 'from-gray-400 to-gray-600';
        }

        // Map functions
        function centerMap() {
            if (!map) return;

            if (filteredActors.length > 0 && markers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                markers.forEach(marker => {
                    bounds.extend(marker.getPosition());
                });
                map.fitBounds(bounds);
            } else {
                map.setCenter({ lat: 43.9339, lng: 3.7086 });
                map.setZoom(14);
            }
        }

        function toggleFullscreen() {
            const mapContainer = document.getElementById('map');
            if (mapContainer.classList.contains('fixed')) {
                mapContainer.classList.remove('fixed', 'inset-0', 'z-50', 'h-screen');
                mapContainer.classList.add('map-container');
            } else {
                mapContainer.classList.remove('map-container');
                mapContainer.classList.add('fixed', 'inset-0', 'z-50', 'h-screen');
            }
            setTimeout(() => {
                if (map) google.maps.event.trigger(map, 'resize');
            }, 100);
        }

        // Scroll animations
        function initScrollAnimations() {
            function revealOnScroll() {
                const reveals = document.querySelectorAll('.reveal');
                reveals.forEach(element => {
                    const windowHeight = window.innerHeight;
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;

                    if (elementTop < windowHeight - elementVisible) {
                        element.classList.add('active');
                    }
                });
            }

            window.addEventListener('scroll', revealOnScroll);
            revealOnScroll(); // Initial check
        }

        // Navigation background on scroll
        function handleNavScroll() {
            const nav = document.querySelector('nav');
            const scrolled = window.scrollY > 50;

            if (scrolled) {
                nav.style.background = 'rgba(255, 255, 255, 0.98)';
                nav.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
                nav.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
            }
        }

        window.addEventListener('scroll', handleNavScroll);
        handleNavScroll(); // Initial check
    </script>
</body>
</html>